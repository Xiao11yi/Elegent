import{_ as ee,r as c,u as te,o as le,a as m,b as d,c as _,d as t,n as B,F as f,e as y,f as o,w as n,E as ae,g as se,t as u,h as T,i as oe,j as ne,k as ce,l as ie,m as re,p as de,q as ue,s as _e,v as pe,x as he}from"./index-08731fde.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 */import{l as V,a as ve,b as ge,c as me,s as fe}from"./article-969d75ae.js";const H=k=>(pe("data-v-51d2f7fe"),k=k(),he(),k),ke={style:{position:"relative",display:"flex",height:"auto",width:"1120px","justify-content":"space-between"}},ye=["onClick"],Ce={style:{"line-height":"60px",width:"300px",height:"60px",background:"#fff"}},we={class:"container"},be={class:"left-section"},xe={class:"article-list"},Te={class:"article-details"},Ee=["onClick"],Se=["onClick"],Ie={class:"article-footer"},Ne=["onClick"],Le=["onClick"],$e=["onClick"],ze=["onClick","src"],Ae={class:"right-section"},Be=H(()=>t("div",{class:"card-header"},[t("span",null,"推荐文章")],-1)),Ve={class:"card-header"},He=H(()=>t("span",null,"标签",-1)),Pe={class:"tags"},Me={__name:"index",setup(k){const P=c(!1),E=c(0),M=te();c("first"),c(!1);const C=c(5),i=c({pageNum:1,pageSize:5}),v=c(""),p=c([]),S=c([]),I=c([]),N=c([]),q=()=>{try{const l=i.value.pageNum,a=Math.ceil(C.value/i.value.pageSize);if(l+1>a)return;i.value.pageNum=l+1,V(i.value).then(s=>{p.value.push(...s.rows),C.value=s.total}).catch(s=>{})}catch{}},j=()=>{delete i.value.categoryId,i.value.pageNum=1,p.value=[],w()},L=l=>{i.value.categoryId=l,i.value.pageNum=1,p.value=[],w(),E.value=l},$=["primary","success","info","warning","danger"],w=()=>{V(i.value).then(l=>{p.value=l.rows,C.value=l.total})},D=()=>{ve().then(l=>{S.value=l.rows})},F=l=>{switch(l){case 1:return"red";case 2:return"rgb(244, 114, 114)";case 3:return"rgb(249, 174, 174)";default:return"#555666"}},U=()=>{ge().then(l=>{const a=l.rows.map((s,h)=>({id:s.id,label:s.name,type:$[Math.floor(Math.random()*$.length)]}));I.value=a})},W=()=>{me().then(l=>{const a=l.rows.map((s,h)=>({id:s.id,label:s.category}));N.value=a})};let z="";const g=(l,a)=>{z=M.resolve({path:`/${l}/${a}`}),window.open(z.href,"_blank")},O=(l,a)=>{let s=null;return function(...b){clearTimeout(s),s=setTimeout(()=>{l.apply(this,b)},a)}},R=function(){const l=window.pageYOffset||document.documentElement.scrollTop,a=window.innerHeight||document.documentElement.clientHeight,s=document.documentElement.scrollHeight;a+l>=s-500&&q()},Y=()=>{v.value!=null&&v.value!=""&&fe({article:v.value}).then(l=>{var a;p.value=((a=l.rows)==null?void 0:a.length)>0?l.rows:p.value,v.value=""})};return le(async()=>{window.addEventListener("scroll",O(R,300)),w(),D(),U(),W()}),(l,a)=>{const s=m("Search"),h=ie,b=re,G=ae,J=m("Wallet"),K=m("Calendar"),x=se,A=m("router-link"),Q=m("CollectionTag"),X=de,Z=ue;return d(),_(f,null,[t("div",ke,[t("ul",{class:B(["nav",{expand:P.value}])},[t("li",null,[t("span",{onClick:j},"全部")]),(d(!0),_(f,null,y(N.value,e=>(d(),_("li",{key:e.id,class:B({active:e.id==E.value}),onClick:r=>L(e.id)},[t("span",null,u(e.label),1)],10,ye))),128))],2),t("div",Ce,[o(G,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),size:"large",placeholder:"请输入搜索内容",class:"input-with-select"},{append:n(()=>[o(b,{size:"large",onClick:Y},{default:n(()=>[o(h,null,{default:n(()=>[o(s)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),t("div",we,[t("div",be,[o(x,{class:"latest-articles"},{default:n(()=>[t("div",xe,[(d(!0),_(f,null,y(p.value,e=>(d(),_("div",{class:"article-item",key:e.id},[t("div",Te,[t("div",{class:"article-title",onClick:r=>g("post",e.id)},u(e.title),9,Ee),t("div",{class:"article-content",onClick:r=>g("post",e.id)},[t("p",null,u(e.abstracts),1)],8,Se),t("div",Ie,[t("div",null,[t("span",{style:{"margin-right":"20px"},onClick:r=>g("user",e.userId)},u(e.userName),9,Ne),t("span",{onClick:r=>L(e.categoryId)},[o(h,null,{default:n(()=>[o(J)]),_:1}),T(u(e.category),1)],8,Le)]),t("div",null,[t("span",{onClick:r=>g("post",e.id)},[o(h,null,{default:n(()=>[o(K)]),_:1}),T(u(oe(_e)(e.createTime,"{y}-{m}-{d}")),1)],8,$e)])])]),t("img",{onClick:r=>g("post",e.id),src:"/dev-api"+e.mainPic,alt:"",class:"article-image",title:"封面"},null,8,ze)]))),128))])]),_:1})]),t("div",Ae,[o(x,{class:"recommended-articles"},{header:n(()=>[Be]),default:n(()=>[(d(!0),_(f,null,y(S.value,(e,r)=>(d(),_("ul",{key:e.id},[o(A,{target:"_blank",to:{path:"/post/"+e.id},class:"router-link"},{default:n(()=>[t("li",null,[t("span",{style:ne({color:F(r+1)})},u(r+1),5),T(u(e.title),1)])]),_:2},1032,["to"])]))),128))]),_:1}),o(x,{class:"label-list"},{header:n(()=>[t("div",Ve,[He,o(h,null,{default:n(()=>[o(Q)]),_:1})])]),default:n(()=>[t("div",Pe,[(d(!0),_(f,null,y(I.value,e=>(d(),ce(X,{key:e.id,type:e.type,class:"tag-item",effect:"dark"},{default:n(()=>[o(A,{to:{path:"/label",query:{id:e.id}}},{default:n(()=>[t("span",null,u(e.label),1)]),_:2},1032,["to"])]),_:2},1032,["type"]))),128))])]),_:1})]),o(Z,{right:80,bottom:100})])],64)}}},Oe=ee(Me,[["__scopeId","data-v-51d2f7fe"]]);export{Oe as default};
