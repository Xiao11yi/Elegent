import{_ as te,r as c,o as le,a as m,b as d,c as _,d as e,n as H,F as v,e as g,f as a,w as s,g as ae,W as se,t as r,k as M,h as f,i as oe,l as ne,p as ce,a4 as ie,a5 as de,m as re,E as ue,q as _e,s as pe,v as me,x as ve}from"./index-08731fde.js";/* empty css                   *//* empty css                   *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                */import{l as P,a as he,b as ge,c as fe}from"./article-969d75ae.js";const E=h=>(me("data-v-42d2827a"),h=h(),ve(),h),ye={style:{position:"relative"}},ke=["onClick"],we={class:"container"},be={class:"left-section"},Ce={class:"article-list"},xe={class:"article-item"},Ee={class:"article-details"},Te={class:"article-title"},Ve={class:"article-content"},Se={class:"article-footer"},Ne={style:{"margin-right":"20px"}},Le=["src"],Ie={class:"right-section"},ze={class:"card-header"},Be=E(()=>e("span",null,"推荐文章",-1)),Ae={class:"card-header"},He=E(()=>e("span",null,"标签",-1)),Me={class:"tags"},Pe=E(()=>e("div",{style:{height:"300px",width:"100%"}},null,-1)),qe={__name:"index",setup(h){const q=c(!1),T=c(0);c("first");const y=c(!1),k=c(5),i=c({pageNum:1,pageSize:4}),V=c(""),p=c([]),S=c([]),N=c([]),L=c([]),D=()=>{try{const l=i.value.pageNum,o=Math.ceil(k.value/i.value.pageSize);if(l+1>o)return;i.value.pageNum=l+1,P(i.value).then(n=>{p.value.push(...n.rows),k.value=n.total}).catch(n=>{})}catch{}},U=()=>{delete i.value.categoryId,i.value.pageNum=1,p.value=[],w()},W=l=>{i.value.categoryId=l,i.value.pageNum=1,p.value=[],w(),T.value=l},I=["primary","success","info","warning","danger"],F=()=>{},w=()=>{P(i.value).then(l=>{p.value=l.rows,k.value=l.total})},O=()=>{he().then(l=>{S.value=l.rows})},$=()=>{ge().then(l=>{const o=l.rows.map((n,u)=>({id:n.id,label:n.name,type:I[Math.floor(Math.random()*I.length)]}));N.value=o})},Y=()=>{fe().then(l=>{const o=l.rows.map((n,u)=>({id:n.id,label:n.category}));L.value=o})},j=(l,o)=>{let n=null;return function(...b){clearTimeout(n),n=setTimeout(()=>{l.apply(this,b)},o)}},G=function(){const l=window.pageYOffset||document.documentElement.scrollTop,o=window.innerHeight||document.documentElement.clientHeight,n=document.documentElement.scrollHeight;o+l>=n-500&&D()};return le(async()=>{window.addEventListener("scroll",j(G,300)),w(),O(),$(),Y()}),(l,o)=>{const n=m("Wallet"),u=ne,b=m("Calendar"),z=m("router-link"),C=ae,B=m("Search"),J=m("CollectionTag"),K=ce,x=ie,Q=de,R=re,X=ue,Z=se,ee=_e;return d(),_(v,null,[e("div",ye,[e("ul",{class:H(["nav",{expand:q.value}])},[(d(!0),_(v,null,g(L.value,t=>(d(),_("li",{key:t.id,class:H({active:t.id==T.value}),onClick:A=>W(t.id)},[e("span",null,r(t.label),1)],10,ke))),128))],2)]),e("div",we,[e("div",be,[a(C,{class:"latest-articles"},{header:s(()=>[e("div",{class:"card-header"},[e("span",{onClick:U},"全部")])]),default:s(()=>[e("div",Ce,[(d(!0),_(v,null,g(p.value,t=>(d(),M(z,{target:"_blank",to:{path:"/post/"+t.id},class:"router-link",key:t.id},{default:s(()=>[e("div",xe,[e("div",Ee,[e("div",Te,r(t.title),1),e("div",Ve,[e("p",null,r(t.abstracts),1)]),e("div",Se,[e("div",null,[e("span",Ne,r(t.userName),1),e("span",null,[a(u,null,{default:s(()=>[a(n)]),_:1}),f(r(t.category),1)])]),e("div",null,[e("span",null,[a(u,null,{default:s(()=>[a(b)]),_:1}),f(r(oe(pe)(t.createTime,"{y}-{m}-{d}")),1)])])])]),e("img",{src:"/dev-api"+t.mainPic,alt:"",class:"article-image",title:"封面"},null,8,Le)])]),_:2},1032,["to"]))),128))])]),_:1})]),e("div",Ie,[a(C,{class:"recommended-articles"},{header:s(()=>[e("div",ze,[Be,e("span",{class:"search-link",onClick:o[0]||(o[0]=t=>y.value=!0)},[a(u,null,{default:s(()=>[a(B)]),_:1}),f("  搜索 ")])])]),default:s(()=>[(d(!0),_(v,null,g(S.value,(t,A)=>(d(),_("ul",{key:t.id},[e("li",null,[e("span",null,r(A+1),1),f(r(t.title),1)])]))),128))]),_:1}),a(C,{class:"label-list"},{header:s(()=>[e("div",Ae,[He,a(u,null,{default:s(()=>[a(J)]),_:1})])]),default:s(()=>[e("div",Me,[(d(!0),_(v,null,g(N.value,t=>(d(),M(K,{key:t.id,type:t.type,class:"tag-item",effect:"dark"},{default:s(()=>[a(z,{to:{path:"/label",query:{id:t.id}}},{default:s(()=>[e("span",null,r(t.label),1)]),_:2},1032,["to"])]),_:2},1032,["type"]))),128))])]),_:1})]),a(Z,{modelValue:y.value,"onUpdate:modelValue":o[3]||(o[3]=t=>y.value=t),title:"搜索",width:"800",onClose:F},{default:s(()=>[a(X,{modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=t=>V.value=t),size:"large",placeholder:"请输入",class:"input-with-select"},{prepend:s(()=>[a(Q,{size:"large",modelValue:l.select,"onUpdate:modelValue":o[1]||(o[1]=t=>l.select=t),placeholder:"选择",style:{width:"115px"}},{default:s(()=>[a(x,{label:"标题",value:"1"}),a(x,{label:"摘要",value:"2"}),a(x,{label:"作者",value:"3"})]),_:1},8,["modelValue"])]),append:s(()=>[a(R,{size:"large"},{default:s(()=>[a(u,null,{default:s(()=>[a(B)]),_:1})]),_:1})]),_:1},8,["modelValue"]),Pe]),_:1},8,["modelValue"]),a(ee,{right:80,bottom:100})])],64)}}},Ge=te(qe,[["__scopeId","data-v-42d2827a"]]);export{Ge as default};
