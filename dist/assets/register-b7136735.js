import{_ as y,aq as w,au as F,a as x,b as m,c as g,f as t,w as l,d as a,Y as V,ar as p,k as b,J as v,h as k,as as C,E,X as R,m as U}from"./index-08731fde.js";/* empty css                     *//* empty css                 */const q={name:"Register",data(){return{codeUrl:"",registerForm:{username:"",password:"",confirmPassword:"",code:"",uuid:""},registerRules:{username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:8,max:20,message:"用户密码长度必须介于 8 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(r,d,c)=>{this.registerForm.password!==d?c(new Error("两次输入的密码不一致")):c()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},loading:!1,captchaEnabled:!0}},created(){this.getCode()},methods:{getCode(){w().then(o=>{this.captchaEnabled=o.captchaEnabled===void 0?!0:o.captchaEnabled,this.captchaEnabled&&(this.codeUrl="data:image/gif;base64,"+o.img,this.registerForm.uuid=o.uuid)})},handleRegister(){this.$refs.registerForm.validate(o=>{o&&(this.loading=!0,F(this.registerForm).then(r=>{const d=this.registerForm.username;this.$alert("<font color='red'>恭喜你，您的账号 "+d+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{this.$router.push("/login")}).catch(()=>{})}).catch(()=>{this.loading=!1,this.captchaEnabled&&this.getCode()}))})}}},K={class:"register"},P=a("h3",{class:"title"},"用户注册",-1),B={class:"register-code"},N=["src"],T={style:{float:"left",margin:"0px 0 20px 0","font-size":"14px"}},I={key:0},L={key:1},z=a("div",{class:"el-register-footer"},[a("span",null,"Copyright © 2018-2023 ruoyi.vip All Rights Reserved.")],-1);function M(o,r,d,c,e,i){const u=E,n=R,f=x("router-link"),h=U,_=V;return m(),g("div",K,[t(_,{ref:"registerForm",model:e.registerForm,rules:e.registerRules,class:"register-form"},{default:l(()=>[P,t(n,{prop:"username"},{default:l(()=>[t(u,{modelValue:e.registerForm.username,"onUpdate:modelValue":r[0]||(r[0]=s=>e.registerForm.username=s),type:"text","auto-complete":"off",placeholder:"账号","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),t(n,{prop:"password"},{default:l(()=>[t(u,{modelValue:e.registerForm.password,"onUpdate:modelValue":r[1]||(r[1]=s=>e.registerForm.password=s),type:"password","auto-complete":"off",placeholder:"密码",onKeyup:p(i.handleRegister,["enter","native"]),"prefix-icon":"Lock"},null,8,["modelValue","onKeyup"])]),_:1}),t(n,{prop:"confirmPassword"},{default:l(()=>[t(u,{modelValue:e.registerForm.confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=s=>e.registerForm.confirmPassword=s),type:"password","auto-complete":"off",placeholder:"确认密码",onKeyup:p(i.handleRegister,["enter","native"]),"prefix-icon":"Lock"},null,8,["modelValue","onKeyup"])]),_:1}),e.captchaEnabled?(m(),b(n,{key:0,prop:"code"},{default:l(()=>[t(u,{modelValue:e.registerForm.code,"onUpdate:modelValue":r[3]||(r[3]=s=>e.registerForm.code=s),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:p(i.handleRegister,["enter","native"]),"prefix-icon":"ChatDotRound"},null,8,["modelValue","onKeyup"]),a("div",B,[a("img",{src:e.codeUrl,onClick:r[4]||(r[4]=(...s)=>i.getCode&&i.getCode(...s)),class:"register-code-img"},null,8,N)])]),_:1})):v("",!0),a("div",T,[t(f,{class:"link-type",to:"/login"},{default:l(()=>[k("使用已有账户登录")]),_:1})]),t(n,{style:{width:"100%"}},{default:l(()=>[t(h,{loading:e.loading,size:"default",type:"primary",style:{width:"100%"},onClick:C(i.handleRegister,["prevent"])},{default:l(()=>[e.loading?(m(),g("span",L,"注 册 中...")):(m(),g("span",I,"注 册"))]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model","rules"]),z])}const J=y(q,[["render",M]]);export{J as default};
